/*****************************************************************************
* @file srv__comms.h
* @brief Communication service layer
* @note
* @author
* @copyright 
*****************************************************************************/

#ifndef SRV__COMMS_H
#define SRV__COMMS_H

/*----------------------------------------------------------------------------
  nested include files
----------------------------------------------------------------------------*/
#include <Arduino.h>

#include "../sys/config.h"

#include <mcp_can.h>

/*----------------------------------------------------------------------------
  macros
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  manifest constants
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  type definitions
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  extern variables
----------------------------------------------------------------------------*/

extern MCP_CAN can;

/*----------------------------------------------------------------------------
  prototypes
----------------------------------------------------------------------------*/

void srv__comms__init();
void srv__comms__process();

void srv__comms__CAN_init();
void srv__comms__CAN_test(const uint loops=5, const unsigned delay_ms=1000);

/*----------------------------------------------------------------------------
  inlines
----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------
  compile time checks
----------------------------------------------------------------------------*/

#endif //SRV__COMMS_H